var plugin=function(e,t,n){"use strict";function o(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}function r(e){let n,o,r,s,i,c,d,p,u,m,f,_,h,$=(e[1]||" ")+"",g=!e[0]&&a(),b=e[4]?.error&&l(e);return{c(){n=t.element("label"),o=t.text($),i=t.space(),c=t.element("div"),d=t.space(),p=t.element("input"),u=t.space(),g&&g.c(),m=t.space(),b&&b.c(),f=t.empty(),t.attr(n,"for",r=e[4]?.fieldId),t.attr(n,"class",s=t.null_to_empty(`spectrum-FieldLabel spectrum-FieldLabel--sizeM spectrum-Form-itemLabel ${e[5]}`)+" svelte-1lshji0"),t.toggle_class(n,"hidden",!e[1]),t.attr(c,"class","g-recaptcha"),t.attr(c,"data-sitekey",e[2]),t.attr(c,"data-callback","recaptcha_callback"),t.attr(p,"type","hidden"),t.attr(p,"id","sillek_code")},m(r,s){t.insert(r,n,s),t.append(n,o),t.insert(r,i,s),t.insert(r,c,s),t.insert(r,d,s),t.insert(r,p,s),e[16](p),t.insert(r,u,s),g&&g.m(r,s),t.insert(r,m,s),b&&b.m(r,s),t.insert(r,f,s),_||(h=t.listen(p,"change",e[11]),_=!0)},p(e,i){2&i&&$!==($=(e[1]||" ")+"")&&t.set_data(o,$),16&i&&r!==(r=e[4]?.fieldId)&&t.attr(n,"for",r),32&i&&s!==(s=t.null_to_empty(`spectrum-FieldLabel spectrum-FieldLabel--sizeM spectrum-Form-itemLabel ${e[5]}`)+" svelte-1lshji0")&&t.attr(n,"class",s),34&i&&t.toggle_class(n,"hidden",!e[1]),4&i&&t.attr(c,"data-sitekey",e[2]),e[0]?g&&(g.d(1),g=null):g||(g=a(),g.c(),g.m(m.parentNode,m)),e[4]?.error?b?b.p(e,i):(b=l(e),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null)},d(o){o&&t.detach(n),o&&t.detach(i),o&&t.detach(c),o&&t.detach(d),o&&t.detach(p),e[16](null),o&&t.detach(u),g&&g.d(o),o&&t.detach(m),b&&b.d(o),o&&t.detach(f),_=!1,h()}}}function s(e){let n;return{c(){n=t.element("div"),n.textContent="Form components need to be wrapped in a form",t.attr(n,"class","placeholder svelte-1lshji0")},m(e,o){t.insert(e,n,o)},p:t.noop,d(e){e&&t.detach(n)}}}function a(e){let n;return{c(){n=t.element("div"),n.textContent="Please select a field",t.attr(n,"class","error svelte-1lshji0")},m(e,o){t.insert(e,n,o)},d(e){e&&t.detach(n)}}}function l(e){let n,o,r=e[4].error+"";return{c(){n=t.element("div"),o=t.text(r),t.attr(n,"class","error svelte-1lshji0")},m(e,r){t.insert(e,n,r),t.append(n,o)},p(e,n){16&n&&r!==(r=e[4].error+"")&&t.set_data(o,r)},d(e){e&&t.detach(n)}}}function i(e){let n,o,a,l,i,c,d,p;let u=function(e,t){return e[9]?r:s}(e),m=u(e);return{c(){n=t.element("script"),a=t.element("script"),a.textContent='function recaptcha_callback()\n    {\n      document.getElementById("sillek_code").value = grecaptcha.getResponse();\n      document.getElementById("sillek_code").dispatchEvent(new Event("change"));\n    }',l=t.space(),i=t.element("div"),m.c(),t.src_url_equal(n.src,o="https://www.google.com/recaptcha/api.js")||t.attr(n,"src","https://www.google.com/recaptcha/api.js"),t.attr(i,"class","spectrum-Form-item")},m(o,r){t.append(document.head,n),t.append(document.head,a),t.insert(o,l,r),t.insert(o,i,r),m.m(i,null),d||(p=t.action_destroyer(c=e[7].call(null,i,e[6].styles)),d=!0)},p(e,[n]){m.p(e,n),c&&t.is_function(c.update)&&64&n&&c.update.call(null,e[6].styles)},i:t.noop,o:t.noop,d(e){t.detach(n),t.detach(a),e&&t.detach(l),e&&t.detach(i),m.d(),d=!1,p()}}}function c(e,o,r){let s,a,l,i,c,d,p,u,{field:m}=o,f="not_set",{label:_}=o,{dataSitekey:h}=o,{validation:$}=o;const{styleable:g}=n.getContext("sdk"),b=n.getContext("component");t.component_subscribe(e,b,(e=>r(6,d=e)));const v=n.getContext("form"),y=n.getContext("form-step");t.component_subscribe(e,y,(e=>r(15,c=e)));const x=n.getContext("field-group"),w=v?.formApi,C=x?.labelPosition||"above";return n.onDestroy((()=>{p?.deregister(),l?.()})),e.$$set=e=>{"field"in e&&r(0,m=e.field),"label"in e&&r(1,_=e.label),"dataSitekey"in e&&r(2,h=e.dataSitekey),"validation"in e&&r(12,$=e.validation)},e.$$.update=()=>{32768&e.$$.dirty&&r(14,s=y&&c||1),20481&e.$$.dirty&&r(13,a=w?.registerField(m,"string","",!1,$,s)),8192&e.$$.dirty&&(l=a?.subscribe((e=>{r(4,u=e?.fieldState),p=e?.fieldApi})))},r(5,i="above"===C?"":`spectrum-FieldLabel--${C}`),[m,_,h,f,u,i,d,g,b,v,y,function(){p?.setValue(f.value)},$,a,s,c,function(e){t.binding_callbacks[e?"unshift":"push"]((()=>{f=e,r(3,f)}))}]}o(".placeholder.svelte-1lshji0{color:var(--spectrum-global-color-gray-600)}label.svelte-1lshji0{white-space:nowrap}label.hidden.svelte-1lshji0{padding:0}.spectrum-Form-itemField.svelte-1lshji0{position:relative;width:100%}.error.svelte-1lshji0{color:var(\n      --spectrum-semantic-negative-color-default,\n      var(--spectrum-global-color-red-500)\n    );font-size:var(--spectrum-global-dimension-font-size-75);margin-top:var(--spectrum-global-dimension-size-75)}.spectrum-FieldLabel--right.svelte-1lshji0,.spectrum-FieldLabel--left.svelte-1lshji0{padding-right:var(--spectrum-global-dimension-size-200)}");class d extends t.SvelteComponent{constructor(e){super(),t.init(this,e,c,i,t.safe_not_equal,{field:0,label:1,dataSitekey:2,validation:12})}}var p="budibase-recaptcha",u="1.0.1";function m(e){let n;const o=e[7].default,r=t.create_slot(o,e,e[6],null);return{c(){r&&r.c()},m(e,t){r&&r.m(e,t),n=!0},p(e,s){r&&r.p&&(!n||64&s)&&t.update_slot_base(r,o,e,e[6],n?t.get_slot_changes(o,e[6],s,null):t.get_all_dirty_from_scope(e[6]),null)},i(e){n||(t.transition_in(r,e),n=!0)},o(e){t.transition_out(r,e),n=!1},d(e){r&&r.d(e)}}}function f(e){let n,o,r,s,a,l,i,c;return{c(){n=t.element("div"),o=t.element("b"),o.textContent=`There was an error running the "${p}" plugin:`,r=t.space(),s=t.element("div"),a=t.text(e[2]),t.attr(s,"class","detail svelte-n0kdln"),t.attr(n,"class","error svelte-n0kdln")},m(d,p){t.insert(d,n,p),t.append(n,o),t.append(n,r),t.append(n,s),t.append(s,a),i||(c=t.action_destroyer(l=e[3].call(null,n,e[1])),i=!0)},p(e,n){4&n&&t.set_data(a,e[2]),l&&t.is_function(l.update)&&2&n&&l.update.call(null,e[1])},i:t.noop,o:t.noop,d(e){e&&t.detach(n),i=!1,c()}}}function _(e){let n,o,r,s;const a=[f,m],l=[];function i(e,t){return e[2]?0:1}return n=i(e),o=l[n]=a[n](e),{c(){o.c(),r=t.empty()},m(e,o){l[n].m(e,o),t.insert(e,r,o),s=!0},p(e,[s]){let c=n;n=i(e),n===c?l[n].p(e,s):(t.group_outros(),t.transition_out(l[c],1,1,(()=>{l[c]=null})),t.check_outros(),o=l[n],o?o.p(e,s):(o=l[n]=a[n](e),o.c()),t.transition_in(o,1),o.m(r.parentNode,r))},i(e){s||(t.transition_in(o),s=!0)},o(e){t.transition_out(o),s=!1},d(e){l[n].d(e),e&&t.detach(r)}}}function h(e,o,r){let s,a,l,i=t.noop,c=()=>(i(),i=t.subscribe(u,(e=>r(2,l=e))),u);e.$$.on_destroy.push((()=>i()));let{$$slots:d={},$$scope:p}=o,{error:u=null}=o;c();const{styleable:m}=n.getContext("sdk"),f=n.getContext("component");return t.component_subscribe(e,f,(e=>r(5,a=e))),e.$$set=e=>{"error"in e&&c(r(0,u=e.error)),"$$scope"in e&&r(6,p=e.$$scope)},e.$$.update=()=>{32&e.$$.dirty&&r(1,s={normal:{},id:a.id,interactive:!0})},[u,s,l,m,f,a,p,d]}o(".error.svelte-n0kdln{background:var(--spectrum-global-color-red-400);color:white;border-radius:4px;padding:16px;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:8px;min-width:400px}.detail.svelte-n0kdln{font-family:monospace;font-size:10px;padding:8px;background:rgba(0, 0, 0, 0.1);border-radius:4px;max-height:100px;overflow:auto}");class $ extends t.SvelteComponent{constructor(e){super(),t.init(this,e,h,_,t.safe_not_equal,{error:0})}}function g(e){let n;const o=e[5].default,r=t.create_slot(o,e,e[4],null);return{c(){r&&r.c()},m(e,t){r&&r.m(e,t),n=!0},p(e,s){r&&r.p&&(!n||16&s)&&t.update_slot_base(r,o,e,e[4],n?t.get_slot_changes(o,e[4],s,null):t.get_all_dirty_from_scope(e[4]),null)},i(e){n||(t.transition_in(r,e),n=!0)},o(e){t.transition_out(r,e),n=!1},d(e){r&&r.d(e)}}}function b(e){let n,o,r,s,a,l,i,c,d=e[1].message+"",p=(e[2]?e[1].stack:"")+"";return{c(){n=t.element("div"),o=t.element("b"),r=t.text(d),s=t.space(),a=t.element("pre"),l=t.text("      "),i=t.text(p),c=t.text("\n    "),t.attr(a,"class","trace svelte-1rw9jfe"),t.attr(n,"class","error svelte-1rw9jfe")},m(e,d){t.insert(e,n,d),t.append(n,o),t.append(o,r),t.append(n,s),t.append(n,a),t.append(a,l),t.append(a,i),t.append(a,c)},p(e,n){2&n&&d!==(d=e[1].message+"")&&t.set_data(r,d),2&n&&p!==(p=(e[2]?e[1].stack:"")+"")&&t.set_data(i,p)},i:t.noop,o:t.noop,d(e){e&&t.detach(n)}}}function v(e){let n,o,r,s;const a=[b,g],l=[];function i(e,t){return e[1]?0:1}return n=i(e),o=l[n]=a[n](e),{c(){o.c(),r=t.empty()},m(e,o){l[n].m(e,o),t.insert(e,r,o),s=!0},p(e,[s]){let c=n;n=i(e),n===c?l[n].p(e,s):(t.group_outros(),t.transition_out(l[c],1,1,(()=>{l[c]=null})),t.check_outros(),o=l[n],o?o.p(e,s):(o=l[n]=a[n](e),o.c()),t.transition_in(o,1),o.m(r.parentNode,r))},i(e){s||(t.transition_in(o),s=!0)},o(e){t.transition_out(o),s=!1},d(e){l[n].d(e),e&&t.detach(r)}}}function y(e,n,o){let r,s=t.noop,a=()=>(s(),s=t.subscribe(c,(e=>o(1,r=e))),c);e.$$.on_destroy.push((()=>s()));let{$$slots:l={},$$scope:i}=n,{error:c=null}=n;a();let{onError:d=null}=n,p="production"!==("undefined"!=typeof process&&process.env&&process.env.NODE_ENV);return e.$$set=e=>{"error"in e&&a(o(0,c=e.error)),"onError"in e&&o(3,d=e.onError),"$$scope"in e&&o(4,i=e.$$scope)},e.$$.update=()=>{10&e.$$.dirty&&r&&d&&d(r)},[c,r,p,d,i,l]}o(".error.svelte-1rw9jfe{border:1px solid red}.trace.svelte-1rw9jfe{font-family:monospace}");class x extends t.SvelteComponent{constructor(e){super(),t.init(this,e,y,v,t.safe_not_equal,{error:0,onError:3})}}function w(){}Promise.resolve();const C=[];function k(e,t=w){let n;const o=new Set;function r(t){if(s=t,((r=e)!=r?s==s:r!==s||r&&"object"==typeof r||"function"==typeof r)&&(e=t,n)){const t=!C.length;for(const t of o)t[1](),C.push(t,e);if(t){for(let e=0;e<C.length;e+=2)C[e][0](C[e+1]);C.length=0}}var r,s}return{set:r,update:function(t){r(t(e))},subscribe:function(s,a=w){const l=[s,a];return o.add(l),1===o.size&&(n=t(r)||w),s(e),()=>{o.delete(l),0===o.size&&(n(),n=null)}}}}const S=["c","l","h","m","p","a","i","o","d"];function j(e){if(e.$$render){let t=e.$$render;return e.$$render=(e,n,o,r)=>{const s=k(void 0);try{return t(e,{error:s,...n},o,r)}catch(r){return s.set(r),t(e,{error:s,...n},o,{})}},e}function t(e,t){return function(...n){try{return e(...n)}catch(e){t(e)}}}return class extends e{constructor(e){const n=k(void 0);e.props.$$slots.default=e.props.$$slots.default.map((e=>(...o)=>{let r=t(e,n.set)(...o);if(r)for(let e of S)r[e]&&(r[e]=t(r[e],n.set));return r})),super(e),this.$$set({error:n})}}}j(x);var E=j($);function F(e){let n;const o=e[1].default,r=t.create_slot(o,e,e[2],null);return{c(){r&&r.c()},m(e,t){r&&r.m(e,t),n=!0},p(e,s){r&&r.p&&(!n||4&s)&&t.update_slot_base(r,o,e,e[2],n?t.get_slot_changes(o,e[2],s,null):t.get_all_dirty_from_scope(e[2]),null)},i(e){n||(t.transition_in(r,e),n=!0)},o(e){t.transition_out(r,e),n=!1},d(e){r&&r.d(e)}}}function N(e){let n,o;const r=[e[0]];let s={$$slots:{default:[F]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)s=t.assign(s,r[e]);return n=new d({props:s}),{c(){t.create_component(n.$$.fragment)},m(e,r){t.mount_component(n,e,r),o=!0},p(e,o){const s=1&o?t.get_spread_update(r,[t.get_spread_object(e[0])]):{};4&o&&(s.$$scope={dirty:o,ctx:e}),n.$set(s)},i(e){o||(t.transition_in(n.$$.fragment,e),o=!0)},o(e){t.transition_out(n.$$.fragment,e),o=!1},d(e){t.destroy_component(n,e)}}}function T(e){let n,o;return n=new E({props:{$$slots:{default:[N]},$$scope:{ctx:e}}}),{c(){t.create_component(n.$$.fragment)},m(e,r){t.mount_component(n,e,r),o=!0},p(e,[t]){const o={};5&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){o||(t.transition_in(n.$$.fragment,e),o=!0)},o(e){t.transition_out(n.$$.fragment,e),o=!1},d(e){t.destroy_component(n,e)}}}function O(e,n,o){let{$$slots:r={},$$scope:s}=n;return e.$$set=e=>{o(0,n=t.assign(t.assign({},n),t.exclude_internal_props(e))),"$$scope"in e&&o(2,s=e.$$scope)},[n=t.exclude_internal_props(n),r,s]}class B extends t.SvelteComponent{constructor(e){super(),t.init(this,e,O,T,t.safe_not_equal,{})}}var L={type:"component",metadata:{},schema:{name:"budibase-recaptcha",friendlyName:"budibase-recaptcha",description:"This component allows you to add a recaptcha to your form.",icon:"Text",settings:[{type:"field/number",key:"field",label:"Field",required:"true"},{type:"text",key:"label",label:"Label"},{type:"text",key:"dataSitekey",label:"ReCAPTURA Data Sitekey"},{type:"validation/string",key:"validation",label:"Validation"}]}};if(window){const e={Component:B,schema:L,version:u};window["##BUDIBASE_CUSTOM_COMPONENTS##"]||(window["##BUDIBASE_CUSTOM_COMPONENTS##"]=[]),window["##BUDIBASE_CUSTOM_COMPONENTS##"].push(e),window.registerCustomComponent&&window.registerCustomComponent(e)}const z=B,M=u;return e.Component=z,e.schema=L,e.version=M,Object.defineProperty(e,"__esModule",{value:!0}),e}({},svelte_internal,svelte);
